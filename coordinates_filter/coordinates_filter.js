javascript:/**CREATED BY: iwantwin93, iwantwin93@gmail.com at 19-05-2014 MAY NOT BE DISTRIBUTED WITHOUT THIS COMMENT**/(function(){if(0==$(".iwan_scripts_popup").length){var y=null,F=function(a,c,f){a="iwan_scripts_"+a+"_popup";var b=document.createElement("div");b.id=a;var g=($(document).width()-c)/2;0>g&&(g=0);b.style.cssText="background-color:#ecd6ad;border:2px solid #7d510f;top:130px;left:"+g+"px;position:absolute;padding:7px;width:"+c+"px;z-index:19;";c=$("body");b.innerHTML=f;b.className="iwan_scripts_popup";c.append(b);f=$("#"+a).height();b=c.height();f>=b-75&&c.height(f+75);return a}("CoordinatesFilter",900,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       '<STYLE type="text/css"> #result_options .tab.selected { border-right: 1px #000000 solid; border-left: 1px #000000 solid; border-top: 1px #000000 solid; background-color: #7d510f !important; color: #ecd6ad !important; cursor: default; } #result_options .tab { float: left; border-right: 1px #7d510f solid; border-left: 1px #7d510f solid; border-top: 1px #7d510f solid; background-color: #ecd6ad !important; cursor: pointer; padding: 2px 5px 2px 5px; } label[for="prependText"] { font-size: 10px; padding-left: 2px; display: inline-block; width: 140px; } #prependText { width: 140px; } label[for="seperatorText"] { font-size: 10px; padding-left: 2px; display: inline-block; width: 83px; } #seperatorText { width: 83px; } label[for="appendText"] { font-size: 10px; padding-left: 5px; display: inline-block; width: 140px; } #appendText { width: 140px; } label[for="beforeCoord"] { font-size: 10px; padding-left: 2px; display: inline-block; width: 140px; } #beforeCoord { width: 140px; } label[for="afterCoord"] { font-size: 10px; padding-left: 5px; display: inline-block; width: 140px; } #afterCoord { width: 140px; } .changeText { width: 40px; }</STYLE><div style="float:right;padding-right:9px;"> <a id="iwan_scripts_popup_close" href="#" style="cursor:pointer;">close</a></div><div><h2 style="text-align: center;">Coordinates Filter</h2></div><div id="iwan_scripts_popup_choices" style="float:left;width:441px;border:2px solid #7d510f;padding:0;margin:0;"> <table style="width:100%;"> <tbody> <tr> <th>What do you want to do?</th> </tr> <tr> <td><input type="radio" id="action_grab_coordinates" name="action" value="grabCoordinates"> Grab coordinates </td> </tr> <tr id="action_grab_coordinates_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>Where do we need to grab coordinates from?</th> </tr> <tr> <td> <textarea id="grabCoords_text" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> <tr> <td><input type="radio" id="action_grab_unique_coordinates" name="action" value="grabUniqueCoordinates"> Grab unique coordinates </td> </tr> <tr id="action_grab_unique_coordinates_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>Where do we need to grab unique coordinates from?</th> </tr> <tr> <td> <textarea id="grabUniqueCoords_text" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> <tr> <td><input type="radio" id="action_find_duplicate" name="action" value="findDupliacteCoords"> Grab duplicate coordinates </td> </tr> <tr id="action_find_duplicate_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>Where do we need to grab duplicate coordinates from?</th> </tr> <tr> <td> <textarea id="findDuplicateCoords_coords" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> <input type="radio" id="action_find_coords_with_amount_of_occurrences" name="action" value="grabCoordinatesWithAmountOfOccurrences"> Grab coordinates with an amount of occurences </td> </tr> <tr id="action_find_coords_with_amount_of_occurrences_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>How should we compare occurences?</th> </tr> <tr> <td> <select id="exact_occurence_comparison_method"> <option value="==">= Equal</option> <option value="!=">!= Not equal</option> <option value=">">> Greater than</option> <option value="<">< Smaller than</option> <option value=">=">>= Greater than or equal to</option> <option value="<="><= Smaller than or equal to</option> </select> </td> </tr> <tr> <th>Which amount of occurences should we select?</th> </tr> <tr> <td><input type="number" id="exact_occurences_amount" value="1"></td> </tr> <tr> <th>Where do we need to grab coordinates from?</th> </tr> <tr> <td> <textarea id="grabCoordinatesWithAmountOfOccurrences_coords" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> <input type="radio" id="action_find_coords_occurrences" name="action" value="grabCoordinatesOccurrences"> Grab occurrences of coordinates </td> </tr> <tr id="action_find_coords_occurrences_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>Where do we need to grab coordinates occurrences from?</th> </tr> <tr> <td> <textarea id="grabCoordinatesOccurrences_coords" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> <tr> <td> <input type="radio" id="action_find_coords_distance_radius" name="action" value="grabCoordinatesInDistanceRadius"> Grab coordinates within distance radius </td> </tr> <tr id="action_find_coords_distance_radius_more" class="action_details"> <td style="border:1px solid #7d510f;"> <table> <tbody> <tr> <th>What should be the radius center?</th> </tr> <tr> <td><input type="text" id="grabCoordinatesInDistanceRadius_center_coord" placeholder="xxx|yyy"> </td> </tr> <tr> <th>What should be the maximum travel distance from the radius center? (1415 is maximum distance, filtering nothing, but still sorting)</th> </tr> <tr> <td><input type="number" id="grabCoordinatesInDistanceRadius_travel_distance" value="1415"></td> </tr> <tr> <th>Where do we need to grab coordinates coordinates from?</th> </tr> <tr> <td> <textarea id="grabCoordinatesInDistanceRadius_coords" rows="10" cols="50" placeholder="Enter text here.."></textarea> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <input type="submit" class="btn" id="coordinatesFilterSubmit" value="Filter coordinates!" style="margin: 5px 0 5px 5px;" /></div><div id="iwan_scripts_popup_results" style="float:left;width:434px;border:2px solid #7d510f;padding:7px;margin:0;"><b>Results:</b><br /> <div id="iwan_scripts_popup_results_more" style="display:none"> <i id="results_description">Filtered results:</i> <div id="result_options" style="clear:both;padding:0 5px 0 2px;margin:0;"> <div class="tab selected" data-option="text">Text</div> <div class="tab" data-option="bbcode">BB-codes</div> </div> <textarea id="coords_results" rows="10" cols="50" style="margin-top: 0;"></textarea> <div id="result_settings" style="clear:both;padding:0 5px 0 2px;margin:0;"> <div><strong>List additions:</strong></div> <div> <label for="prependText">Prepend</label> <label for="seperatorText">Seperator</label> <label for="appendText">Append</label> </div> <div style=""> <input id="prependText" type="text" value=""> <input id="seperatorText" type="text" value="{NEWLINE}"> <input id="appendText" type="text" value=""> <input type="button" class="btn changeText" value="OK"> </div> <div><i>To start a new line, place {NEWLINE} in the text</i></div> <div><strong>Coordinate additions:</strong></div> <div> <label for="beforeCoord">Before</label> <label for="afterCoord">After</label> </div> <div style=""> <input id="beforeCoord" type="text" value="{COUNTER}. "> <input id="afterCoord" type="text" value=""> <input type="button" class="btn changeText" value="OK"> </div> <div><i>To add an incrementing counter, place {COUNTER} in the text. Place {PAD_COUNTER} for counters with zero based padding.</i></div> </div> </div></div><div style="clear:both;font-style:italic;width:100%;"><br /> <div style="float:left;width:50%;"><strong>Version:</strong> 1.9 <br /> <strong>Date:</strong> 30-12-2014<br /> </div> <div style="float:left;width:50%;"><strong>Created by:</strong> iwantwin93 <br /> <strong>Email: </strong> <a href="mailto:twscripts@iwantwin.nl">twscripts@iwantwin.nl</a> <br /></div> <div style="clear:both;"></div></div>');
  window.hasOwnProperty("game_data")&&window.game_data.hasOwnProperty("village")&&window.game_data.village.hasOwnProperty("coord")&&$("#grabCoordinatesInDistanceRadius_center_coord").val(window.game_data.village.coord);var m=$("#"+F);m.find("#iwan_scripts_village_rename_popup_examples").hide();var B=m.find(".action_details");B.hide();var x=m.find('input[type="radio"][name="action"]');x.on("change",function(){var a=$(this),a=$("#"+a.attr("id")+"_more");B.hide();1==a.length&&a.show();$("#iwan_scripts_popup_results_more").hide();
    $("#result_options").find(".tab").removeClass("selected").first().addClass("selected")});var C=function(a){var c=this;c.x=0;c.y=0;c.getString=function(){return c.x+"|"+c.y};(function(){var f=a.split("|");c.x=f[0];c.y=f[1]})()},v=function(a){return a.filter(function(a,f,b){return b.indexOf(a)==f})},G=function(a){return a.filter(function(a,f,b){return b.indexOf(a)!=f})},D=function(a){var c={},f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(!c.hasOwnProperty(b)){for(var g=0,h=null;null==h||-1!=h;){var d=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 0;null!=h&&(d=h+1);h=a.indexOf(b,d);-1!=h&&g++}c[b]=g}}return c},H=function(a,c,f){var b=[],g={};c=new C(c);for(var h in a)if(a.hasOwnProperty(h)){var d=a[h],e=new C(d),e=Math.sqrt(Math.pow(c.x-e.x,2)+Math.pow(c.y-e.y,2));parseInt(e)<=f&&(b.push(d),g[d]=parseFloat(parseFloat(e).toFixed(2)))}b.sort(function(a,b){return g[a]<g[b]?-1:g[a]>g[b]?1:0});return{coords:b,distancedCoords:g}},q=function(a){return a.match(/\b(\d{1,3}\|\d{1,3})\b/g)},t=function(a,c,f,b,g,h,d){var e="";if(0<a.length){e+=c;c=a.length;
    for(var k=0;9<c;)c/=10,k++;c=k;var l=k=null;d&&(d.hasOwnProperty("amountOfOccurrences")&&(k=d.amountOfOccurrences),d.hasOwnProperty("distancedCoords")&&(l=d.distancedCoords));d=0;for(var m in a)if(a.hasOwnProperty(m)){var w=a[m];d++;var r;r="";for(var n=d,p=0;9<n;)n/=10,p++;for(;p<c;)r+="0",p++;r+=d;n=g.replace("{COUNTER}",d);p=h.replace("{COUNTER}",d);n=n.replace("{PAD_COUNTER}",r);p=p.replace("{PAD_COUNTER}",r);null!=k&&(n=n.replace("{OCCURRENCES}",k[w]),p=p.replace("{OCCURRENCES}",k[w]));null!=
    l&&(n=n.replace("{DISTANCE}",l[w]),p=p.replace("{DISTANCE}",l[w]));e+=n+w+p;d<a.length&&(e+=f)}e+=b}$("#coords_results").val(e)},z=function(){var a={};a.prependText=$("#prependText").val();a.seperatorText=$("#seperatorText").val();a.appendText=$("#appendText").val();a.beforeCoord=$("#beforeCoord").val();a.afterCoord=$("#afterCoord").val();a.prependText=a.prependText.replace("{NEWLINE}","\n");a.seperatorText=a.seperatorText.replace("{NEWLINE}","\n");a.appendText=a.appendText.replace("{NEWLINE}","\n");
    return a},E=function(a){var c=$("#result_options");"bbcode"==a?($("#prependText").val(""),$("#seperatorText").val("{NEWLINE}"),$("#appendText").val(""),$("#beforeCoord").val("{COUNTER}. [coord]"),$("#afterCoord").val("[/coord]"),c.find('[data-option="text"]').removeClass("selected"),c.find('[data-option="bbcode"]').addClass("selected")):($("#prependText").val(""),$("#seperatorText").val("{NEWLINE}"),$("#appendText").val(""),$("#beforeCoord").val("{COUNTER}. "),$("#afterCoord").val(""),c.find('[data-option="text"]').addClass("selected"),
    c.find('[data-option="bbcode"]').removeClass("selected"))};m.find("#coordinatesFilterSubmit").on("click",function(){var a=x.andSelf().find('input[type="radio"][name="action"]:checked').val();a!=y&&"grabCoordinatesOccurrences"==y&&E($("#result_options").find(".tab.selected").attr("data-option"));y=a;var c=z();A(a,c)});m.find("#result_options").on("click",".tab:not(.selected)",function(){var a=$(this),c=a.attr("data-option");E(c);m.find("#result_options").find(".tab").removeClass("selected");a.addClass("selected");
    a=x.andSelf().find('input[type="radio"][name="action"]:checked').val();c=z();A(a,c)});m.find(".changeText").on("click",function(){var a=z(),c=x.andSelf().find('input[type="radio"][name="action"]:checked').val();A(c,a)});var A=function(a,c){var f=(new Date).getTime(),b=$("#iwan_scripts_popup_results_more"),g="";switch(a){case "findDupliacteCoords":g=u.grabDupliacteCoords(c);break;case "grabCoordinates":g=u.grabCoordinates(c);break;case "grabUniqueCoordinates":g=u.grabUniqueCoordinates(c);break;case "grabCoordinatesWithAmountOfOccurrences":g=
    u.grabCoordinatesWithAmountOfOccurrences(c);break;case "grabCoordinatesOccurrences":g=u.grabCoordinatesOccurrences(c);break;case "grabCoordinatesInDistanceRadius":g=u.grabCoordinatesInDistanceRadius(c)}f=(new Date).getTime()-f;g=g+"<br /> Processed in: "+f+" ms.";$("#results_description").html(g);b.show()},u=new function(){var a,c,f;this.grabCoordinatesWithAmountOfOccurrences=function(b){var c="",h=" ",d="";b.hasOwnProperty("prependText")&&(c=b.prependText);b.hasOwnProperty("seperatorText")&&(h=b.seperatorText);
    b.hasOwnProperty("appendText")&&(d=b.appendText);var e=function(){alert("checkIfValidAmountOfOccurences wasn't constructed yet.")};(function(){var a=$("#exact_occurence_comparison_method").val(),b=parseInt($("#exact_occurences_amount").val());"=="==a?e=function(a){return a==b}:"!="==a?e=function(a){return a!=b}:">"==a?e=function(a){return a>b}:">="==a?e=function(a){return a>=b}:"<"==a?e=function(a){return a<b}:"<="==a&&(e=function(a){return a<=b})})();a=q($("#grabCoordinatesWithAmountOfOccurrences_coords").val());
    var k=D(a),l=[],m;for(m in k)k.hasOwnProperty(m)&&e(k[m])&&l.push(m);k=v(a);t(l,c,h,d,b.beforeCoord,b.afterCoord);return f="Filtered coordinates: ( "+l.length+" coordinates (total inputted coordinates: "+a.length+", which had "+k.length+" unique coordinates), removed "+(a.length-l.length)+" coordinates ( "+(k.length-l.length)+" uniques ) with an incompatible amount of occurences )"};this.grabDupliacteCoords=function(b){var g="",h=" ",d="";b.hasOwnProperty("prependText")&&(g=b.prependText);b.hasOwnProperty("seperatorText")&&
  (h=b.seperatorText);b.hasOwnProperty("appendText")&&(d=b.appendText);a=q($("#findDuplicateCoords_coords").val());c=v(a);var e=G(a),e=v(e);t(e,g,h,d,b.beforeCoord,b.afterCoord);f="Filtered coordinates: ( "+e.length+" from "+c.length+" uniques (total: "+a.length+"), removed "+(c.length-e.length)+" uniques )";return f+="<br />Notice that the following coordinates occured two or more times"};this.grabCoordinates=function(b){var c="",h=" ",d="";b.hasOwnProperty("prependText")&&(c=b.prependText);b.hasOwnProperty("seperatorText")&&
  (h=b.seperatorText);b.hasOwnProperty("appendText")&&(d=b.appendText);a=q($("#grabCoords_text").val());t(a,c,h,d,b.beforeCoord,b.afterCoord);return f="Filtered coordinates: "+a.length};this.grabUniqueCoordinates=function(b){var g="",h=" ",d="";b.hasOwnProperty("prependText")&&(g=b.prependText);b.hasOwnProperty("seperatorText")&&(h=b.seperatorText);b.hasOwnProperty("appendText")&&(d=b.appendText);a=q($("#grabUniqueCoords_text").val());c=v(a);t(c,g,h,d,b.beforeCoord,b.afterCoord);return f="Filtered coordinates: ( "+
    c.length+" from "+a.length+", removed "+(a.length-c.length)+" duplicates )"};this.grabCoordinatesOccurrences=function(b){var c="",h=" ",d="";b.hasOwnProperty("prependText")&&(c=b.prependText);b.hasOwnProperty("seperatorText")&&(h=b.seperatorText);b.hasOwnProperty("appendText")&&(d=b.appendText);var e=b.beforeCoord;b=b.afterCoord;-1==b.indexOf("{OCCURRENCES}")&&-1==e.indexOf("{OCCURRENCES}")&&(b+=" occurred {OCCURRENCES}x",$("#afterCoord").val(b));a=q($("#grabCoordinatesOccurrences_coords").val());
    var k=D(a),l=v(a);t(a,c,h,d,e,b,{amountOfOccurrences:k});return f="Filtered coordinates: "+l.length+" unique coordinates (total inputted coordinates: "+a.length+")"};this.grabCoordinatesInDistanceRadius=function(b){var c="",h=" ",d="";b.hasOwnProperty("prependText")&&(c=b.prependText);b.hasOwnProperty("seperatorText")&&(h=b.seperatorText);b.hasOwnProperty("appendText")&&(d=b.appendText);var e=b.beforeCoord;b=b.afterCoord;-1==b.indexOf("{DISTANCE}")&&-1==e.indexOf("{DISTANCE}")&&(b+=" - {DISTANCE} fields",
    $("#afterCoord").val(b));a=q($("#grabCoordinatesInDistanceRadius_coords").val());var k=q($("#grabCoordinatesInDistanceRadius_center_coord").val()),l="";k instanceof Array&&0<k.length&&(l=k[0]);k=parseInt($("#grabCoordinatesInDistanceRadius_travel_distance").val());""!=l?(l=H(a,l,k),k=l.coords,t(k,c,h,d,e,b,{distancedCoords:l.distancedCoords}),f="Filtered coordinates: "+k.length+" from "+a.length):(t([],c,h,d,e,b),f="Entered centerTarget was not valid.");return f}};m.find("#iwan_scripts_popup_close").on("click",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                function(){m.remove()})}else alert("Please close the currently opened script popups first!");void 0})();